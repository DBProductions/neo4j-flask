{% extends "layout.html" %}
{% block body %}
<h2 class="col-md-offset-1">{{ username }}'s profile</h2>
{% if session.email %}
<div class="row">    
    <div class="col-md-offset-1 col-md-7">
        {% if session.username == username %}
            <h3>Users similar to you:</h3>

            {% for user in similar %}
                <p><a href="{{ url_for('profile', username=user.similar_user) }}">{{ user.similar_user }}</a> also tags about <i>{{ ', '.join(user.tags) }}</i></p>
            {% else %}
                <p>There aren't any users who've set the same tags as you!</p>
            {% endfor %}

            <h3>Your languages:</h3>
            {% include "display_languages.html" %}

            <h3>Your projects:</h3>
            {% include "display_projects.html" %}

        {% else %}

            <p>{{ username }} has liked {{ common.likes }} of your projects and
            {% if common.tags %}
                also blogs about <i>{{ ', '.join(common.tags) }}</i>
            {% else %}
                hasn't blogged about any of the same tags
            {% endif %}
            </p>
        {% endif %}
    </div>
    <div class="col-md-4">
        {% if session.username == username %}
            <h3>Share a project</h3>
            <form action="{{ url_for('add_project') }}" method=post>
                <div class="form-group">
                    <input type="text" class="form-control" name="title" placeholder="Title">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" name="tags" placeholder="Tag,Tag">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" name="repository" placeholder="Repository">
                </div>
                <button type="submit" class="btn btn-default">Share</button>
            </form>
            {% if all_languages|length > 0 %}
                <hr>            
                <h3>Add language</h3>
                <form action="{{ url_for('add_language') }}" method=post>
                    <div class="form-group">
                        <select class="form-control" name="language">                    
                            <option>---</option>
                            {% for language in all_languages %}
                                <option value="{{ language.name }}">{{ language.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-default">Add</button>
                </form>
            {% endif %}
        {% endif %}
    </div>
</div>
{% endif %}
 
{% endblock %}