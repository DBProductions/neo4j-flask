{% extends "layout.html" %}
{% block body %}
<h2 class="col-md-offset-1">{{ username }}'s profile</h2>
{% if session.email %}
<div class="row">
    <div class="col-md-offset-1 col-md-7">
        <h3>Languages:</h3>
        {% include "partials/display_languages.html" %}
        {% if session.username == username %}
            <h3>Users similar to you:</h3>
            {% for user in similar %}
                <p><a href="{{ url_for('profile', username=user.similar_user) }}">{{ user.similar_user }}</a> also tags about <i>{{ ', '.join(user.tags) }}</i></p>
            {% else %}
                <p>There aren't any users who've set the same tags as you!</p>
            {% endfor %}
        {% else %}
            <br><br>
            <div>{{ username }} has liked {{ common.likes }} of your projects.</div>
            <div>
                {% if common.tags %}
                    Also blogs about <i>{{ ', '.join(common.tags) }}.</i>
                {% else %}
                    Hasn't blogged about any of the same tags.
                {% endif %}
            </div>
        {% endif %}
        <h3>Projects:</h3>
        {% include "partials/display_projects.html" %}
    </div>
    <div class="col-md-4">
        {% if session.username == username %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Share a project</h3>
                </div>
                <div class="panel-body">
                    <form action="{{ url_for('add_project') }}" method=post>
                        <div class="form-group">
                            <input type="text" class="form-control" name="title" placeholder="Title/Name" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="tags" placeholder="Tag,Tag" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" name="repository" placeholder="Github Repository" required>
                        </div>
                        <div class="pull-right">
                            <button type="submit" class="btn btn btn-success">Share</button>
                        </div>
                    </form>
                </div>
            </div>
            {% if all_languages|length > 0 %}
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Add language</h3>
                    </div>
                    <div class="panel-body">
                        <form action="{{ url_for('add_language') }}" method=post>
                            <div class="form-group">
                                <select class="form-control" name="language">
                                    <option>---</option>
                                    {% for language in all_languages %}
                                        <option value="{{ language.name }}">{{ language.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="pull-right">
                                <button type="submit" class="btn btn btn-success">Add</button>
                            </div>
                        </form>
                    </div>
                </div>
            {% endif %}
        {% endif %}
    </div>
</div>
{% endif %}

{% endblock %}
